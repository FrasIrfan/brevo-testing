"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/test-chat/page",{

/***/ "(app-pages-browser)/./src/app/test-chat/page.jsx":
/*!************************************!*\
  !*** ./src/app/test-chat/page.jsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ TestChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\nfunction TestChat() {\n    _s();\n    const [currentUser, setCurrentUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedUser, setSelectedUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom();\n    }, [\n        messages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Debug logging for auth state\n        const unsubscribe = _lib_firebase__WEBPACK_IMPORTED_MODULE_3__.auth.onAuthStateChanged((user)=>{\n            if (user) {\n                console.log(\"Logged in user:\", user.email);\n                setCurrentUser(user);\n                setStatus(\"Already logged in as: \".concat(user.email));\n            } else {\n                console.log(\"No user logged in\");\n            }\n        });\n        return ()=>unsubscribe();\n    }, []);\n    // Fetch available users with debug logging\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!currentUser) {\n            console.log(\"No current user, skipping users fetch\");\n            return;\n        }\n        console.log(\"Setting up users listener for:\", currentUser.email);\n        console.log(\"Current user ID:\", currentUser.uid);\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"users\"));\n        const unsubscribe = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(q, (snapshot)=>{\n            console.log(\"Users snapshot received. Document count:\", snapshot.docs.length);\n            console.log(\"Raw snapshot data:\", snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })));\n            const usersList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })).filter((user)=>user.uid !== currentUser.uid);\n            console.log(\"Current user ID being filtered:\", currentUser.uid);\n            console.log(\"Filtered users list:\", usersList);\n            setUsers(usersList);\n        }, (error)=>{\n            console.error(\"Error fetching users:\", error);\n        });\n        return ()=>unsubscribe();\n    }, [\n        currentUser\n    ]);\n    // Listen for messages between current user and selected user\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!currentUser || !selectedUser) return;\n        // Create a unique conversation ID (smaller UID first)\n        const conversationId = [\n            currentUser.uid,\n            selectedUser.uid\n        ].sort().join(\"_\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"conversations\", conversationId, \"messages\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"timestamp\", \"asc\"));\n        const unsubscribe = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(q, (snapshot)=>{\n            const newMessages = [];\n            snapshot.forEach((doc)=>{\n                newMessages.push({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            setMessages(newMessages);\n        });\n        return ()=>unsubscribe();\n    }, [\n        currentUser,\n        selectedUser\n    ]);\n    const signInWithGoogle = async ()=>{\n        setLoading(true);\n        try {\n            const result = await (0,_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.signInWithPopup)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.auth, _lib_firebase__WEBPACK_IMPORTED_MODULE_3__.googleProvider);\n            const user = result.user;\n            console.log(\"Signing in user:\", user.email);\n            console.log(\"User data:\", {\n                uid: user.uid,\n                email: user.email,\n                name: user.displayName,\n                photoURL: user.photoURL\n            });\n            const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"users\", user.uid);\n            console.log(\"Attempting to save user document with ID:\", user.uid);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userDocRef, {\n                uid: user.uid,\n                email: user.email,\n                name: user.displayName,\n                photoURL: user.photoURL,\n                lastLogin: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n            }, {\n                merge: true\n            });\n            // Verify the document was created\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userDocRef);\n            console.log(\"Saved user document data:\", docSnap.exists() ? docSnap.data() : \"Document does not exist\");\n            // Double check the users collection\n            const usersSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"users\"));\n            console.log(\"All users in database:\", usersSnapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })));\n            setCurrentUser(user);\n            setStatus(\"Successfully logged in as: \".concat(user.email));\n        } catch (error) {\n            console.error(\"Error signing in with Google:\", error);\n            setStatus(\"Error signing in: \".concat(error.message));\n        } finally{\n            setLoading(false);\n        }\n    };\n    const signOut = async ()=>{\n        try {\n            await _lib_firebase__WEBPACK_IMPORTED_MODULE_3__.auth.signOut();\n            setCurrentUser(null);\n            setSelectedUser(null);\n            setMessages([]);\n            setStatus(\"Signed out successfully\");\n        } catch (error) {\n            console.error(\"Error signing out:\", error);\n            setStatus(\"Error signing out: \".concat(error.message));\n        }\n    };\n    const sendMessage = async (e)=>{\n        e.preventDefault();\n        if (!message.trim() || !currentUser || !selectedUser) return;\n        try {\n            // Create a unique conversation ID (smaller UID first)\n            const conversationId = [\n                currentUser.uid,\n                selectedUser.uid\n            ].sort().join(\"_\");\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"conversations\", conversationId, \"messages\"), {\n                text: message,\n                sender: currentUser.uid,\n                receiver: selectedUser.uid,\n                senderName: currentUser.displayName,\n                senderEmail: currentUser.email,\n                senderPhoto: currentUser.photoURL,\n                timestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n            });\n            setMessage(\"\");\n        } catch (error) {\n            console.error(\"Error sending message:\", error);\n            setStatus(\"Error sending message: \".concat(error.message));\n        }\n    };\n    const formatTimestamp = (timestamp)=>{\n        if (!timestamp) return \"\";\n        const date = timestamp.toDate();\n        return new Intl.DateTimeFormat(\"en-US\", {\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n            hour12: true\n        }).format(date);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-8 max-w-6xl mx-auto\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                className: \"text-2xl font-bold mb-4\",\n                children: \"Chat Testing Interface\"\n            }, void 0, false, {\n                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                lineNumber: 189,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-8 flex justify-between items-center\",\n                children: !currentUser ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: signInWithGoogle,\n                    disabled: loading,\n                    className: \"bg-white text-gray-700 px-6 py-3 rounded shadow-md flex items-center space-x-2 \".concat(loading ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-gray-50\"),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: \"https://www.google.com/favicon.ico\",\n                            alt: \"Google\",\n                            className: \"w-5 h-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 200,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: loading ? \"Signing in...\" : \"Sign in with Google\"\n                        }, void 0, false, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 205,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                    lineNumber: 193,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center space-x-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: currentUser.photoURL,\n                                    alt: currentUser.displayName,\n                                    className: \"w-8 h-8 rounded-full\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                    lineNumber: 210,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-sm font-medium\",\n                                    children: currentUser.displayName\n                                }, void 0, false, {\n                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                    lineNumber: 215,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 209,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: signOut,\n                            className: \"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 text-sm\",\n                            children: \"Sign Out\"\n                        }, void 0, false, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 217,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                    lineNumber: 208,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                lineNumber: 191,\n                columnNumber: 7\n            }, this),\n            currentUser && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid grid-cols-4 gap-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"col-span-1 bg-white rounded-lg shadow p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"font-semibold mb-4\",\n                                children: \"Available Users\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 231,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    users.map((user)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setSelectedUser(user),\n                                            className: \"w-full flex items-center space-x-2 p-2 rounded \".concat((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.uid) === user.uid ? \"bg-blue-50 text-blue-600\" : \"hover:bg-gray-50\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                    src: user.photoURL,\n                                                    alt: user.name,\n                                                    className: \"w-8 h-8 rounded-full\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                    lineNumber: 243,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-left\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-medium\",\n                                                            children: user.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                            lineNumber: 249,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-gray-500\",\n                                                            children: user.email\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                            lineNumber: 250,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                    lineNumber: 248,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, user.uid, true, {\n                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                            lineNumber: 234,\n                                            columnNumber: 17\n                                        }, this)),\n                                    users.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-gray-500 text-center\",\n                                        children: \"No other users available\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                        lineNumber: 255,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 232,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                        lineNumber: 230,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"col-span-3\",\n                        children: selectedUser ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white rounded-lg shadow\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-4 border-b flex items-center space-x-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: selectedUser.photoURL,\n                                            alt: selectedUser.name,\n                                            className: \"w-8 h-8 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                            lineNumber: 268,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"font-medium\",\n                                                    children: selectedUser.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                    lineNumber: 274,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-500\",\n                                                    children: selectedUser.email\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                    lineNumber: 275,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                            lineNumber: 273,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                    lineNumber: 267,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[500px] overflow-y-auto p-4 space-y-4\",\n                                    children: [\n                                        messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-center text-gray-500 mt-20\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                children: \"No messages yet. Start the conversation!\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                lineNumber: 283,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                            lineNumber: 282,\n                                            columnNumber: 21\n                                        }, this) : messages.map((msg)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-start space-x-2 \".concat(msg.sender === currentUser.uid ? \"flex-row-reverse space-x-reverse\" : \"\"),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                        src: msg.senderPhoto,\n                                                        alt: msg.senderName,\n                                                        className: \"w-8 h-8 rounded-full\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                        lineNumber: 293,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"max-w-xs px-4 py-2 rounded-lg \".concat(msg.sender === currentUser.uid ? \"bg-blue-500 text-white\" : \"bg-gray-100 text-gray-800\"),\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex justify-between items-center mb-1\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                        className: \"text-xs font-medium\",\n                                                                        children: msg.senderName\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                                        lineNumber: 306,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    msg.timestamp && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                        className: \"text-xs opacity-75 ml-2\",\n                                                                        children: formatTimestamp(msg.timestamp)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                                        lineNumber: 308,\n                                                                        columnNumber: 31\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                                lineNumber: 305,\n                                                                columnNumber: 27\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                className: \"break-words\",\n                                                                children: msg.text\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                                lineNumber: 313,\n                                                                columnNumber: 27\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                        lineNumber: 298,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, msg.id, true, {\n                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                lineNumber: 287,\n                                                columnNumber: 23\n                                            }, this)),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            ref: messagesEndRef\n                                        }, void 0, false, {\n                                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                            lineNumber: 318,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                    lineNumber: 280,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                    onSubmit: sendMessage,\n                                    className: \"p-4 border-t\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex space-x-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: message,\n                                                onChange: (e)=>setMessage(e.target.value),\n                                                placeholder: \"Message \".concat(selectedUser.name, \"...\"),\n                                                className: \"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                                onKeyPress: (e)=>{\n                                                    if (e.key === \"Enter\" && !e.shiftKey) {\n                                                        e.preventDefault();\n                                                        if (message.trim()) {\n                                                            sendMessage(e);\n                                                        }\n                                                    }\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                lineNumber: 324,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"submit\",\n                                                disabled: !message.trim(),\n                                                className: \"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                children: \"Send\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                                lineNumber: 339,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                        lineNumber: 323,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                    lineNumber: 322,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 265,\n                            columnNumber: 15\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white rounded-lg shadow p-8 text-center text-gray-500\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-lg\",\n                                children: \"Select a user to start chatting\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 351,\n                                columnNumber: 17\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                            lineNumber: 350,\n                            columnNumber: 15\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                        lineNumber: 263,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                lineNumber: 228,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-4 p-4 bg-gray-50 border border-gray-200 rounded\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"font-semibold mb-2\",\n                        children: \"Testing Instructions:\"\n                    }, void 0, false, {\n                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                        lineNumber: 359,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ol\", {\n                        className: \"list-decimal list-inside space-y-2 text-gray-700\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Open this page in two different browsers (e.g., Chrome and Firefox)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 361,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Sign in with different Google accounts in each browser\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 362,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Select the other user from the users list on the left\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 363,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Send messages to test private chat\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 364,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Messages will appear instantly with timestamps\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 365,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Switch browsers to reply from the other account\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 366,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: \"Refresh the page to test message history persistence\"\n                            }, void 0, false, {\n                                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                                lineNumber: 367,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                        lineNumber: 360,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n                lineNumber: 358,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/macbookpro/Desktop/brevo-testing/src/app/test-chat/page.jsx\",\n        lineNumber: 188,\n        columnNumber: 5\n    }, this);\n}\n_s(TestChat, \"sCYvzkQYiKCzilUZ2icTtJdMzSo=\");\n_c = TestChat;\nvar _c;\n$RefreshReg$(_c, \"TestChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvdGVzdC1jaGF0L3BhZ2UuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRW9EO0FBQ3NGO0FBQzNEO0FBRWhFLFNBQVNrQjs7SUFDdEIsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUdwQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNxQixRQUFRQyxVQUFVLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUN1QixTQUFTQyxXQUFXLEdBQUd4QiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUN5QixTQUFTQyxXQUFXLEdBQUcxQiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUMyQixVQUFVQyxZQUFZLEdBQUc1QiwrQ0FBUUEsQ0FBQyxFQUFFO0lBQzNDLE1BQU0sQ0FBQzZCLE9BQU9DLFNBQVMsR0FBRzlCLCtDQUFRQSxDQUFDLEVBQUU7SUFDckMsTUFBTSxDQUFDK0IsY0FBY0MsZ0JBQWdCLEdBQUdoQywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNaUMsaUJBQWlCL0IsNkNBQU1BLENBQUM7SUFFOUIsTUFBTWdDLGlCQUFpQjtZQUNyQkQ7U0FBQUEsMEJBQUFBLGVBQWVFLE9BQU8sY0FBdEJGLDhDQUFBQSx3QkFBd0JHLGNBQWMsQ0FBQztZQUFFQyxVQUFVO1FBQVM7SUFDOUQ7SUFFQXBDLGdEQUFTQSxDQUFDO1FBQ1JpQztJQUNGLEdBQUc7UUFBQ1A7S0FBUztJQUViMUIsZ0RBQVNBLENBQUM7UUFDUiwrQkFBK0I7UUFDL0IsTUFBTXFDLGNBQWN4QiwrQ0FBSUEsQ0FBQ3lCLGtCQUFrQixDQUFDLENBQUNDO1lBQzNDLElBQUlBLE1BQU07Z0JBQ1JDLFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUJGLEtBQUtHLEtBQUs7Z0JBQ3pDdkIsZUFBZW9CO2dCQUNmbEIsVUFBVSx5QkFBb0MsT0FBWGtCLEtBQUtHLEtBQUs7WUFDL0MsT0FBTztnQkFDTEYsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRjtR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QUNKLDhEQUFDQTswQ0FBRzs7Ozs7OzBDQUNKLDhEQUFDQTswQ0FBRzs7Ozs7OzBDQUNKLDhEQUFDQTswQ0FBRzs7Ozs7OzBDQUNKLDhEQUFDQTswQ0FBRzs7Ozs7OzBDQUNKLDhEQUFDQTswQ0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS2Q7R0E3V3dCdEc7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC90ZXN0LWNoYXQvcGFnZS5qc3g/OWE3NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGRvYywgc2V0RG9jLCBzZXJ2ZXJUaW1lc3RhbXAsIGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcmRlckJ5LCBvblNuYXBzaG90LCBhZGREb2MsIGdldERvY3MsIHdoZXJlLCBnZXREb2MgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgYXV0aCwgZGIsIGdvb2dsZVByb3ZpZGVyLCBzaWduSW5XaXRoUG9wdXAgfSBmcm9tICcuLi8uLi9saWIvZmlyZWJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXN0Q2hhdCgpIHtcbiAgY29uc3QgW2N1cnJlbnRVc2VyLCBzZXRDdXJyZW50VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdXNlcnMsIHNldFVzZXJzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3NlbGVjdGVkVXNlciwgc2V0U2VsZWN0ZWRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZihudWxsKTtcblxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBhdXRoIHN0YXRlXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvZ2dlZCBpbiB1c2VyOicsIHVzZXIuZW1haWwpO1xuICAgICAgICBzZXRDdXJyZW50VXNlcih1c2VyKTtcbiAgICAgICAgc2V0U3RhdHVzKGBBbHJlYWR5IGxvZ2dlZCBpbiBhczogJHt1c2VyLmVtYWlsfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgbG9nZ2VkIGluJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgfSwgW10pO1xuXG4gIC8vIEZldGNoIGF2YWlsYWJsZSB1c2VycyB3aXRoIGRlYnVnIGxvZ2dpbmdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY3VycmVudCB1c2VyLCBza2lwcGluZyB1c2VycyBmZXRjaCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIHVzZXJzIGxpc3RlbmVyIGZvcjonLCBjdXJyZW50VXNlci5lbWFpbCk7XG4gICAgY29uc29sZS5sb2coJ0N1cnJlbnQgdXNlciBJRDonLCBjdXJyZW50VXNlci51aWQpO1xuICAgIFxuICAgIGNvbnN0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAndXNlcnMnKSk7XG4gICAgXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvblNuYXBzaG90KHEsIChzbmFwc2hvdCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1VzZXJzIHNuYXBzaG90IHJlY2VpdmVkLiBEb2N1bWVudCBjb3VudDonLCBzbmFwc2hvdC5kb2NzLmxlbmd0aCk7XG4gICAgICBjb25zb2xlLmxvZygnUmF3IHNuYXBzaG90IGRhdGE6Jywgc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpKTtcbiAgICAgIFxuICAgICAgY29uc3QgdXNlcnNMaXN0ID0gc25hcHNob3QuZG9jc1xuICAgICAgICAubWFwKGRvYyA9PiAoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KSlcbiAgICAgICAgLmZpbHRlcih1c2VyID0+IHVzZXIudWlkICE9PSBjdXJyZW50VXNlci51aWQpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnQ3VycmVudCB1c2VyIElEIGJlaW5nIGZpbHRlcmVkOicsIGN1cnJlbnRVc2VyLnVpZCk7XG4gICAgICBjb25zb2xlLmxvZygnRmlsdGVyZWQgdXNlcnMgbGlzdDonLCB1c2Vyc0xpc3QpO1xuICAgICAgc2V0VXNlcnModXNlcnNMaXN0KTtcbiAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzOicsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICB9LCBbY3VycmVudFVzZXJdKTtcblxuICAvLyBMaXN0ZW4gZm9yIG1lc3NhZ2VzIGJldHdlZW4gY3VycmVudCB1c2VyIGFuZCBzZWxlY3RlZCB1c2VyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjdXJyZW50VXNlciB8fCAhc2VsZWN0ZWRVc2VyKSByZXR1cm47XG5cbiAgICAvLyBDcmVhdGUgYSB1bmlxdWUgY29udmVyc2F0aW9uIElEIChzbWFsbGVyIFVJRCBmaXJzdClcbiAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IFtjdXJyZW50VXNlci51aWQsIHNlbGVjdGVkVXNlci51aWRdLnNvcnQoKS5qb2luKCdfJyk7XG5cbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAnY29udmVyc2F0aW9ucycsIGNvbnZlcnNhdGlvbklkLCAnbWVzc2FnZXMnKSxcbiAgICAgIG9yZGVyQnkoJ3RpbWVzdGFtcCcsICdhc2MnKVxuICAgICk7XG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uU25hcHNob3QocSwgKHNuYXBzaG90KSA9PiB7XG4gICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IFtdO1xuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIG5ld01lc3NhZ2VzLnB1c2goeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pO1xuICAgICAgfSk7XG4gICAgICBzZXRNZXNzYWdlcyhuZXdNZXNzYWdlcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgfSwgW2N1cnJlbnRVc2VyLCBzZWxlY3RlZFVzZXJdKTtcblxuICBjb25zdCBzaWduSW5XaXRoR29vZ2xlID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBnb29nbGVQcm92aWRlcik7XG4gICAgICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdTaWduaW5nIGluIHVzZXI6JywgdXNlci5lbWFpbCk7XG4gICAgICBjb25zb2xlLmxvZygnVXNlciBkYXRhOicsIHtcbiAgICAgICAgdWlkOiB1c2VyLnVpZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgIHBob3RvVVJMOiB1c2VyLnBob3RvVVJMXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdXNlckRvY1JlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci51aWQpO1xuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gc2F2ZSB1c2VyIGRvY3VtZW50IHdpdGggSUQ6JywgdXNlci51aWQpO1xuICAgICAgXG4gICAgICBhd2FpdCBzZXREb2ModXNlckRvY1JlZiwge1xuICAgICAgICB1aWQ6IHVzZXIudWlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogdXNlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgcGhvdG9VUkw6IHVzZXIucGhvdG9VUkwsXG4gICAgICAgIGxhc3RMb2dpbjogc2VydmVyVGltZXN0YW1wKClcbiAgICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSB0aGUgZG9jdW1lbnQgd2FzIGNyZWF0ZWRcbiAgICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2ModXNlckRvY1JlZik7XG4gICAgICBjb25zb2xlLmxvZygnU2F2ZWQgdXNlciBkb2N1bWVudCBkYXRhOicsIGRvY1NuYXAuZXhpc3RzKCkgPyBkb2NTbmFwLmRhdGEoKSA6ICdEb2N1bWVudCBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgXG4gICAgICAvLyBEb3VibGUgY2hlY2sgdGhlIHVzZXJzIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IHVzZXJzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICd1c2VycycpKTtcbiAgICAgIGNvbnNvbGUubG9nKCdBbGwgdXNlcnMgaW4gZGF0YWJhc2U6JywgdXNlcnNTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSkpO1xuICAgICAgXG4gICAgICBzZXRDdXJyZW50VXNlcih1c2VyKTtcbiAgICAgIHNldFN0YXR1cyhgU3VjY2Vzc2Z1bGx5IGxvZ2dlZCBpbiBhczogJHt1c2VyLmVtYWlsfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzaWduaW5nIGluIHdpdGggR29vZ2xlOicsIGVycm9yKTtcbiAgICAgIHNldFN0YXR1cyhgRXJyb3Igc2lnbmluZyBpbjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYXV0aC5zaWduT3V0KCk7XG4gICAgICBzZXRDdXJyZW50VXNlcihudWxsKTtcbiAgICAgIHNldFNlbGVjdGVkVXNlcihudWxsKTtcbiAgICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgICAgIHNldFN0YXR1cygnU2lnbmVkIG91dCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2lnbmluZyBvdXQ6JywgZXJyb3IpO1xuICAgICAgc2V0U3RhdHVzKGBFcnJvciBzaWduaW5nIG91dDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghbWVzc2FnZS50cmltKCkgfHwgIWN1cnJlbnRVc2VyIHx8ICFzZWxlY3RlZFVzZXIpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSB1bmlxdWUgY29udmVyc2F0aW9uIElEIChzbWFsbGVyIFVJRCBmaXJzdClcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbklkID0gW2N1cnJlbnRVc2VyLnVpZCwgc2VsZWN0ZWRVc2VyLnVpZF0uc29ydCgpLmpvaW4oJ18nKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdjb252ZXJzYXRpb25zJywgY29udmVyc2F0aW9uSWQsICdtZXNzYWdlcycpLCB7XG4gICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgIHNlbmRlcjogY3VycmVudFVzZXIudWlkLFxuICAgICAgICByZWNlaXZlcjogc2VsZWN0ZWRVc2VyLnVpZCxcbiAgICAgICAgc2VuZGVyTmFtZTogY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgIHNlbmRlckVtYWlsOiBjdXJyZW50VXNlci5lbWFpbCxcbiAgICAgICAgc2VuZGVyUGhvdG86IGN1cnJlbnRVc2VyLnBob3RvVVJMLFxuICAgICAgICB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpXG4gICAgICB9KTtcblxuICAgICAgc2V0TWVzc2FnZSgnJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBzZXRTdGF0dXMoYEVycm9yIHNlbmRpbmcgbWVzc2FnZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBmb3JtYXRUaW1lc3RhbXAgPSAodGltZXN0YW1wKSA9PiB7XG4gICAgaWYgKCF0aW1lc3RhbXApIHJldHVybiAnJztcbiAgICBjb25zdCBkYXRlID0gdGltZXN0YW1wLnRvRGF0ZSgpO1xuICAgIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCB7XG4gICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgIGhvdXIxMjogdHJ1ZVxuICAgIH0pLmZvcm1hdChkYXRlKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicC04IG1heC13LTZ4bCBteC1hdXRvXCI+XG4gICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIG1iLTRcIj5DaGF0IFRlc3RpbmcgSW50ZXJmYWNlPC9oMT5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi04IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICB7IWN1cnJlbnRVc2VyID8gKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3NpZ25JbldpdGhHb29nbGV9XG4gICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGJnLXdoaXRlIHRleHQtZ3JheS03MDAgcHgtNiBweS0zIHJvdW5kZWQgc2hhZG93LW1kIGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiAke1xuICAgICAgICAgICAgICBsb2FkaW5nID8gJ29wYWNpdHktNTAgY3Vyc29yLW5vdC1hbGxvd2VkJyA6ICdob3ZlcjpiZy1ncmF5LTUwJ1xuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGltZyBcbiAgICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mYXZpY29uLmljb1wiIFxuICAgICAgICAgICAgICBhbHQ9XCJHb29nbGVcIiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy01IGgtNVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHNwYW4+e2xvYWRpbmcgPyAnU2lnbmluZyBpbi4uLicgOiAnU2lnbiBpbiB3aXRoIEdvb2dsZSd9PC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8aW1nIFxuICAgICAgICAgICAgICAgIHNyYz17Y3VycmVudFVzZXIucGhvdG9VUkx9IFxuICAgICAgICAgICAgICAgIGFsdD17Y3VycmVudFVzZXIuZGlzcGxheU5hbWV9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctOCBoLTggcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPntjdXJyZW50VXNlci5kaXNwbGF5TmFtZX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17c2lnbk91dH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkIGhvdmVyOmJnLXJlZC02MDAgdGV4dC1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNpZ24gT3V0XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7Y3VycmVudFVzZXIgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTQgZ2FwLTRcIj5cbiAgICAgICAgICB7LyogVXNlcnMgTGlzdCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cgcC00XCI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi00XCI+QXZhaWxhYmxlIFVzZXJzPC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIHt1c2Vycy5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBrZXk9e3VzZXIudWlkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRVc2VyKHVzZXIpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBwLTIgcm91bmRlZCAke1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFVzZXI/LnVpZCA9PT0gdXNlci51aWRcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwIHRleHQtYmx1ZS02MDAnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnaG92ZXI6YmctZ3JheS01MCdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgc3JjPXt1c2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICAgICAgICBhbHQ9e3VzZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy04IGgtOCByb3VuZGVkLWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1sZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj57dXNlci5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e3VzZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICB7dXNlcnMubGVuZ3RoID09PSAwICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIE5vIG90aGVyIHVzZXJzIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIENoYXQgQXJlYSAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTNcIj5cbiAgICAgICAgICAgIHtzZWxlY3RlZFVzZXIgPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3dcIj5cbiAgICAgICAgICAgICAgICB7LyogU2VsZWN0ZWQgVXNlciBIZWFkZXIgKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWIgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgIHNyYz17c2VsZWN0ZWRVc2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICAgICAgICBhbHQ9e3NlbGVjdGVkVXNlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTggaC04IHJvdW5kZWQtZnVsbFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj57c2VsZWN0ZWRVc2VyLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj57c2VsZWN0ZWRVc2VyLmVtYWlsfTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgey8qIE1lc3NhZ2VzICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNTAwcHhdIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtZ3JheS01MDAgbXQtMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cD5ObyBtZXNzYWdlcyB5ZXQuIFN0YXJ0IHRoZSBjb252ZXJzYXRpb24hPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLm1hcCgobXNnKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXttc2cuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLXN0YXJ0IHNwYWNlLXgtMiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyID09PSBjdXJyZW50VXNlci51aWQgPyAnZmxleC1yb3ctcmV2ZXJzZSBzcGFjZS14LXJldmVyc2UnIDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttc2cuc2VuZGVyUGhvdG99XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17bXNnLnNlbmRlck5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctOCBoLTggcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LXhzIHB4LTQgcHktMiByb3VuZGVkLWxnICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciA9PT0gY3VycmVudFVzZXIudWlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTgwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+e21zZy5zZW5kZXJOYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bXNnLnRpbWVzdGFtcCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIG9wYWNpdHktNzUgbWwtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZXN0YW1wKG1zZy50aW1lc3RhbXApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJicmVhay13b3Jkc1wiPnttc2cudGV4dH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7LyogTWVzc2FnZSBJbnB1dCAqL31cbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17c2VuZE1lc3NhZ2V9IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e21lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRNZXNzYWdlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YE1lc3NhZ2UgJHtzZWxlY3RlZFVzZXIubmFtZX0uLi5gfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBweC00IHB5LTIgYm9yZGVyIHJvdW5kZWQtbGcgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbktleVByZXNzPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFtZXNzYWdlLnRyaW0oKX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC02IHB5LTIgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdyBwLTggdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGdcIj5TZWxlY3QgYSB1c2VyIHRvIHN0YXJ0IGNoYXR0aW5nPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHAtNCBiZy1ncmF5LTUwIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZFwiPlxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCBtYi0yXCI+VGVzdGluZyBJbnN0cnVjdGlvbnM6PC9oMz5cbiAgICAgICAgPG9sIGNsYXNzTmFtZT1cImxpc3QtZGVjaW1hbCBsaXN0LWluc2lkZSBzcGFjZS15LTIgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgIDxsaT5PcGVuIHRoaXMgcGFnZSBpbiB0d28gZGlmZmVyZW50IGJyb3dzZXJzIChlLmcuLCBDaHJvbWUgYW5kIEZpcmVmb3gpPC9saT5cbiAgICAgICAgICA8bGk+U2lnbiBpbiB3aXRoIGRpZmZlcmVudCBHb29nbGUgYWNjb3VudHMgaW4gZWFjaCBicm93c2VyPC9saT5cbiAgICAgICAgICA8bGk+U2VsZWN0IHRoZSBvdGhlciB1c2VyIGZyb20gdGhlIHVzZXJzIGxpc3Qgb24gdGhlIGxlZnQ8L2xpPlxuICAgICAgICAgIDxsaT5TZW5kIG1lc3NhZ2VzIHRvIHRlc3QgcHJpdmF0ZSBjaGF0PC9saT5cbiAgICAgICAgICA8bGk+TWVzc2FnZXMgd2lsbCBhcHBlYXIgaW5zdGFudGx5IHdpdGggdGltZXN0YW1wczwvbGk+XG4gICAgICAgICAgPGxpPlN3aXRjaCBicm93c2VycyB0byByZXBseSBmcm9tIHRoZSBvdGhlciBhY2NvdW50PC9saT5cbiAgICAgICAgICA8bGk+UmVmcmVzaCB0aGUgcGFnZSB0byB0ZXN0IG1lc3NhZ2UgaGlzdG9yeSBwZXJzaXN0ZW5jZTwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiZG9jIiwic2V0RG9jIiwic2VydmVyVGltZXN0YW1wIiwiY29sbGVjdGlvbiIsInF1ZXJ5Iiwib3JkZXJCeSIsIm9uU25hcHNob3QiLCJhZGREb2MiLCJnZXREb2NzIiwid2hlcmUiLCJnZXREb2MiLCJhdXRoIiwiZGIiLCJnb29nbGVQcm92aWRlciIsInNpZ25JbldpdGhQb3B1cCIsIlRlc3RDaGF0IiwiY3VycmVudFVzZXIiLCJzZXRDdXJyZW50VXNlciIsInN0YXR1cyIsInNldFN0YXR1cyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwibWVzc2FnZSIsInNldE1lc3NhZ2UiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwidXNlcnMiLCJzZXRVc2VycyIsInNlbGVjdGVkVXNlciIsInNldFNlbGVjdGVkVXNlciIsIm1lc3NhZ2VzRW5kUmVmIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsInVuc3Vic2NyaWJlIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwidXNlciIsImNvbnNvbGUiLCJsb2ciLCJlbWFpbCIsInVpZCIsInEiLCJzbmFwc2hvdCIsImRvY3MiLCJsZW5ndGgiLCJtYXAiLCJpZCIsImRhdGEiLCJ1c2Vyc0xpc3QiLCJmaWx0ZXIiLCJlcnJvciIsImNvbnZlcnNhdGlvbklkIiwic29ydCIsImpvaW4iLCJuZXdNZXNzYWdlcyIsImZvckVhY2giLCJwdXNoIiwic2lnbkluV2l0aEdvb2dsZSIsInJlc3VsdCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwidXNlckRvY1JlZiIsImxhc3RMb2dpbiIsIm1lcmdlIiwiZG9jU25hcCIsImV4aXN0cyIsInVzZXJzU25hcHNob3QiLCJzaWduT3V0Iiwic2VuZE1lc3NhZ2UiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0cmltIiwidGV4dCIsInNlbmRlciIsInJlY2VpdmVyIiwic2VuZGVyTmFtZSIsInNlbmRlckVtYWlsIiwic2VuZGVyUGhvdG8iLCJ0aW1lc3RhbXAiLCJmb3JtYXRUaW1lc3RhbXAiLCJkYXRlIiwidG9EYXRlIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwiaG91ciIsIm1pbnV0ZSIsImhvdXIxMiIsImZvcm1hdCIsImRpdiIsImNsYXNzTmFtZSIsImgxIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwiaW1nIiwic3JjIiwiYWx0Iiwic3BhbiIsImgyIiwicCIsIm1zZyIsInJlZiIsImZvcm0iLCJvblN1Ym1pdCIsImlucHV0IiwidHlwZSIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsIm9uS2V5UHJlc3MiLCJrZXkiLCJzaGlmdEtleSIsImgzIiwib2wiLCJsaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/test-chat/page.jsx\n"));

/***/ })

});